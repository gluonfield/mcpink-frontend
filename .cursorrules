# Cursor AI Rules for TanStack Start Project

## Key Rules to Remember

- âœ… Always use `export default function ComponentName() {}`
- âœ… Use `@/` imports, never relative `../`
- âœ… Organize features in `src/features/feature-name/`
- âœ… No `any` types, prefer `unknown`
- âœ… Alphabetical import ordering
- âœ… Use pnpm only, never npm/yarn

## Project Structure

```
src/
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â””â”€â”€ components/
â”‚   â””â”€â”€ feature-name/
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ types.ts      # Feature types (directly in root)
â”‚       â”œâ”€â”€ components/
â”‚       â”œâ”€â”€ hooks/        # Includes context providers
â”‚       â”œâ”€â”€ lib/          # Configuration and utilities
â”‚       â””â”€â”€ utils/
â”œâ”€â”€ routes/
â”œâ”€â”€ test/
â””â”€â”€ styles.css
```

## ðŸš¨ MANDATORY Code Quality Workflow

**ALWAYS run these commands after making significant changes:**

```bash
pnpm typecheck  # âœ… CRITICAL - Check TypeScript errors
pnpm lint       # âœ… CRITICAL - Fix code quality issues
pnpm test       # âœ… CRITICAL - Ensure tests pass
```

**Pre-commit hooks enforce these automatically, but run manually during development!**

## Code Style Guidelines

### React Components

- Use functional components with TypeScript
- Export components as default exports
- Use proper TypeScript types, avoid `any`
- Organize imports alphabetically

### Feature Export Pattern

Each feature must have an `index.ts` file that exports all public modules:

```typescript
// src/features/feature-name/index.ts
export * from './components'
export * from './hooks'
export * from './types'
export * from './utils'
export { default as FeatureProvider } from './hooks/FeatureProvider'
```

This enables clean imports: `import { useFeature, FeatureComponent } from '@/features/feature-name'`

### Imports

- Use absolute imports with `@/` prefix
- Never use relative imports like `../`
- Group imports: external libraries first, then internal modules

### File Naming

- Components: PascalCase (e.g., `Header.tsx`)
- Hooks: camelCase starting with `use` (e.g., `useAuth.ts`)
- Utils: camelCase (e.g., `formatDate.ts`)
- Types: camelCase with `.types.ts` suffix

### TypeScript

- Always provide explicit types for function parameters and returns
- Use `unknown` instead of `any`
- Prefer interfaces for object types
- Use type assertions sparingly

### Testing

- Test files in `__tests__` folders or `.test.tsx` suffix
- Use Vitest with React Testing Library
- Test user interactions, not implementation details

### Styling

- Use Tailwind CSS v4 with utility classes
- Single quotes for all strings (className, imports, etc.)
- No trailing commas
- 100 character line width
- Use semantic class names when needed

## Package Management

- Always use `pnpm` for package management
- Never use `npm` or `yarn`
- Keep dependencies up to date

## Git Workflow

- Use conventional commits
- Pre-commit hooks will run linting and formatting
- Fix all TypeScript errors before committing
